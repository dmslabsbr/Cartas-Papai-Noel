{% extends "base.html" %}

{% block title %}Dashboard - Noel{% endblock %}

{% block content %}
<h1>Dashboard</h1>

<div class="card mb-4">
  <div class="card-header">
    Informações do Usuário
  </div>
  <div class="card-body">
    <h5 class="card-title">{{ user.display_name }}</h5>
    <p class="card-text">Email: {{ user.email }}</p>
    {% if user.matricula %}
    <p class="card-text">Matrícula: {{ user.matricula }}</p>
    {% endif %}
    
    <h6 class="mt-3">Permissões:</h6>
    <ul>
      {% for role in user.roles %}
      <li>{{ role.description or role.code }}</li>
      {% endfor %}
    </ul>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        Cartinhas
      </div>
      <div class="card-body">
        <h5 class="card-title">Gerenciamento de Cartinhas</h5>
        <p class="card-text">Acesse o sistema de gerenciamento de cartinhas.</p>
        <a href="/cartas" class="btn btn-primary">Ver Cartinhas</a>
      </div>
    </div>
  </div>
  
  {% if "ADMIN" in user.roles|map(attribute="code")|list %}
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        Administração
      </div>
      <div class="card-body">
        <h5 class="card-title">Painel de Administração</h5>
        <p class="card-text">Acesse o painel administrativo do sistema.</p>
        <a href="/admin" class="btn btn-danger">Área Administrativa</a>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
